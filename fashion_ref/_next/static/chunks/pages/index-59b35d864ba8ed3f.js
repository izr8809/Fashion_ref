(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(8956)}])},8956:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return J}});var n=a(5893),l=a(9008),s=a.n(l),i=a(7294),o=a(1496),r=a(1796),d=a(2293),c=a(7357),p=a(155),h=a(6154),u=a(3946),x=a(5861),g=a(787),m=a(5819),f=a(517),b=a(1903),j=a(3321);let Z=e=>{let[t,a]=(0,i.useState)(e),n=(0,i.useCallback)(e=>{a(e.target.value)},[]);return[t,n,a]};var v=a(6540),y=a(2761),k=a(8201),C=a(7976),w=a(7469);let S={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function P(e){let{setIsLoggedIn:t,setModalOpen:a}=e,l="".concat("http://15.164.224.172:8080","/signups"),[s,o]=Z(""),[r,d]=(0,i.useState)(!1),[p,u]=Z(""),[g,m]=Z(""),[f,v]=Z(""),[y,k]=(0,i.useState)(!1);(0,i.useCallback)(e=>{v(e.target.value),k(e.target.value!==g)},[g,v]);let C=e=>{let t=!1;if(e){let a=/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/.test(e);t=!!a}else t=!1;return t},P=()=>{a(!1)},W=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),g!==f?k(!0):C(s)?h.Z.post(l,{email:s,name:p,password:g},{headers:{"Content-Type":"application/json"}}).then(e=>{t(!0)}).catch(e=>{"already exist"==e.response.data.message?alert("이미 존재하는 이메일입니다."):alert("회원가입이 정상적으로 되지 않았습니다.")}):d(!0)},[s,g,f,t,p]);return(0,n.jsx)(w.Z,{open:!0,onClose:P,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(c.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:W,sx:S,children:[(0,n.jsx)(x.Z,{component:"h1",variant:"h5",sx:{textAlign:"center"},children:"회원가입"}),(0,n.jsx)(b.Z,{label:"이메일",name:"user-email",sx:{marginTop:3},fullWidth:!0,type:"email",value:s,required:!0,onChange:o}),r&&(0,n.jsx)("span",{style:{color:"red"},children:"Email 형식이 잘못되었습니다"}),(0,n.jsx)(b.Z,{label:"이름",name:"user-nick",sx:{marginTop:3},fullWidth:!0,value:p,required:!0,onChange:u}),(0,n.jsx)(b.Z,{label:"비밀번호",fullWidth:!0,name:"user-password",sx:{marginTop:3},type:"password",value:g,required:!0,onChange:m}),(0,n.jsx)(b.Z,{label:"비밀번호체크",fullWidth:!0,name:"user-password-check",sx:{marginTop:3},type:"password",value:f,required:!0,onChange:v}),y&&(0,n.jsx)("span",{style:{color:"red"},children:"비밀번호가 일치하지 않습니다"}),(0,n.jsx)(j.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},size:"large",children:"확인"})]})})}var W=a(4054),E=a(3841),F=a(315),z=a(5675),I=a.n(z);let T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function D(e){let{setuploadModalOpen:t}=e,[a,l]=(0,i.useState)({name:""}),s="".concat("http://15.164.224.172:8080","/uploads"),[o,r]=(0,i.useState)(),[d,p]=i.useState(""),[u,g]=(0,i.useState)(!1),[f,v]=(0,i.useState)(!1),[y,k]=Z(""),[C,S]=Z(""),[P,z]=Z(""),[D,L]=Z(""),[R,_]=(0,i.useState)({title:"",desc:"",photos:[null]}),N=()=>{t(!1)},{title:q,desc:A,photos:O}=R,[B,M]=i.useState(""),[G,U]=i.useState(""),[H,V,X]=Z(""),$=e=>{M(e.target.value)},J=e=>{U(e.target.value)},K=e=>{Q(e.target.files)},Q=e=>{let t=[];if(void 0!=e){if(e.length>1)alert("이미지는 1개만 넣어주세요");else{g(!0);for(let a=0;a<e.length;a++){let n=e[a];r(e[a]);let l=new FileReader;l.readAsDataURL(n),l.addEventListener("load",()=>{let e={name:n.name,type:n.type,size:n.size,src:l.result};t.push(e),_({...R,photos:[...O,...t]})})}}}},Y=e=>{e.target.parentElement,_({...R,photos:[...O.slice(0,1),...O.slice(2)]}),g(!1)},ee=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),v(!0)},[]),et=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),v(!1)},[]),ea=e=>{e.preventDefault(),e.stopPropagation();let t=e.dataTransfer,a=null==t?void 0:t.files;v(!1),Q(a)};(0,i.useCallback)(e=>{e.preventDefault()},[]);let en="".concat("http://15.164.224.172:8080","/USERINFO"),[el,es]=(0,i.useState)({name:""});(0,i.useEffect)(()=>{h.Z.get(en,{}).then(e=>{es(e.data)}).catch(e=>{console.log(e)})},[]);let ei=(0,i.useCallback)(e=>{if(""==B||""==G)e.preventDefault(),e.stopPropagation(),alert("카테고리, 시즌 필수");else if(""==P)e.preventDefault(),e.stopPropagation(),alert("브랜드입력 필수");else if(void 0==o)e.preventDefault(),e.stopPropagation(),alert("이미지 필수");else{e.preventDefault(),e.stopPropagation(),console.log("submit");let t=new FormData;t.append("image",o),t.append("nickname",y),t.append("brand",P),t.append("link",D),t.append("category",B),t.append("season",G),t.append("hashtag",H),t.append("reason",C),h.Z.post(s,t).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}},[P,D,y,o,B,H,G]);return(0,n.jsx)(w.Z,{open:!0,onClose:N,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(c.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:ei,sx:T,children:[(0,n.jsx)(x.Z,{sx:{textAlign:"center"},component:"h1",variant:"h5",children:"업로드"}),(0,n.jsx)(b.Z,{required:!0,label:"브랜드",fullWidth:!0,sx:{marginTop:"5px"},name:"user-brand",type:"text",value:P,variant:"standard",onChange:z}),(0,n.jsx)(b.Z,{label:"Link",fullWidth:!0,sx:{marginTop:"5px"},name:"user-link",type:"text",value:D,required:!0,variant:"standard",onChange:L}),(0,n.jsx)(b.Z,{label:"선정이유",fullWidth:!0,sx:{marginTop:"5px"},name:"user-link",type:"text",value:C,required:!0,variant:"standard",onChange:S}),(0,n.jsxs)(W.Z,{sx:{width:"40%",marginRight:"10%",marginTop:"25px"},children:[(0,n.jsx)(E.Z,{id:"demo-simple-select-label",children:"카테고리"}),(0,n.jsxs)(F.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:B,label:"category",required:!0,onChange:$,children:[(0,n.jsx)(m.Z,{value:"상의",children:"상의"}),(0,n.jsx)(m.Z,{value:"하의",children:"하의"}),(0,n.jsx)(m.Z,{value:"아우터",children:"아우터"}),(0,n.jsx)(m.Z,{value:"디테일",children:"디테일"}),(0,n.jsx)(m.Z,{value:"이미지",children:"이미지"}),(0,n.jsx)(m.Z,{value:"악세사리",children:"악세사리"})]})]}),(0,n.jsxs)(W.Z,{sx:{width:"40%",marginTop:"25px"},children:[(0,n.jsx)(E.Z,{id:"demo-simple-select-label",children:"시즌"}),(0,n.jsxs)(F.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:G,label:"season",required:!0,onChange:J,children:[(0,n.jsx)(m.Z,{value:"23SS",children:"23SS"}),(0,n.jsx)(m.Z,{value:"23FW",children:"23FW"})]})]}),(0,n.jsx)(b.Z,{id:"standard-basic",sx:{marginTop:"30px"},value:H,onChange:V,fullWidth:!0,label:"해시태그입력 #검정 #반팔 ",variant:"outlined"}),(0,n.jsx)("div",{className:"file-upload",style:{marginTop:"6px"},children:(0,n.jsxs)("div",{className:"custom-form-group",children:[!u&&(0,n.jsxs)("div",{className:f?"custom-file-drop-area highlight":"custom-file-drop-area",onDragEnter:ee,onDragOver:ee,onDragLeave:et,onDrop:ea,children:[(0,n.jsx)("input",{type:"file",name:"photos",placeholder:"Enter photos",multiple:!1,id:"filephotos",onChange:K}),(0,n.jsx)("label",{htmlFor:"filephotos",children:"Drag & Drop"})]}),(0,n.jsx)("div",{className:"custom-file-preview",children:O.length>0&&O.map((e,t)=>0!=t?(0,n.jsxs)("div",{className:"prev-img",children:[(0,n.jsx)("span",{onClick:Y,children:"\xd7"}),e&&(0,n.jsx)(I(),{src:e.src,alt:e.name})]},t):(0,n.jsx)(n.Fragment,{}))})]})}),(0,n.jsx)(j.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},size:"large",children:"확인"})]})})}let L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function R(e){let{setIsLoggedIn:t,setloginModalOpen:a}=e,l="".concat("http://15.164.224.172:8080","/login"),[s,o]=Z(""),[r,d]=Z(""),[p,u]=(0,i.useState)({id:0,name:null}),g=()=>{a(!1)},m=(0,i.useCallback)(e=>{e.preventDefault(),""==s?alert("이메일을 입력해주세요"):""==r?alert("비밀번호를 입력해주세요"):h.Z.post(l,{email:s,password:r},{headers:{"Content-Type":"application/json"}}).then(e=>{u(e.data.data),t(!0)}).catch(e=>{alert("로그인 정보가 일치하지 않습니다."),console.log(e)})},[s,r,t]);return(0,n.jsx)(w.Z,{open:!0,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(c.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:m,sx:L,children:[(0,n.jsx)(x.Z,{component:"h1",variant:"h5",children:"로그인"}),(0,n.jsx)(b.Z,{label:"이메일",name:"user-email",fullWidth:!0,type:"email",value:s,required:!0,variant:"standard",onChange:o}),(0,n.jsx)(b.Z,{label:"비밀번호",name:"user-nick",type:"password",fullWidth:!0,value:r,required:!0,variant:"standard",onChange:d}),(0,n.jsx)(j.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},size:"large",children:"로그인"})]})})}function _(e){let{isLoggedIn:t,setIsLoggedIn:a,setPost:l}=e,s="".concat("http://15.164.224.172:8080","/hashtagsearch"),o="".concat("http://15.164.224.172:8080","/loadpost"),[r,g]=i.useState(!1),[w,S]=i.useState(!1),[W,E]=i.useState(!1),[F,z]=Z(""),[I,T]=i.useState(null),[L,_]=i.useState(null),[N,q]=i.useState(""),[A,O]=i.useState(""),B=(0,i.useRef)(null);(0,i.useEffect)(()=>{B.current&&B.current.focus()},[]);let M=()=>{g(!0)},G=()=>{E(!0)},U=Boolean(I),H=Boolean(L),V=()=>{_(null)},X=()=>{T(null),V()},$=(0,i.useCallback)(()=>{h.Z.get("".concat("http://15.164.224.172:8080","/logout")).then(e=>{"ok"==e.data.message&&a(!1),E(!1)}).catch(e=>{alert("서버와 연결 끊겼네요. 새로고침.!")})},[a]),J=(0,i.useCallback)(()=>{t?S(!0):E(!0)},[t]),K=e=>{_(e.currentTarget)},Q=(0,i.useCallback)(()=>{alert("준비중입니다.")},[]),Y=i.useCallback(e=>{if(""==F)h.Z.get(o).then(e=>{l(e.data)}).catch(e=>{alert("포스팅 불러오기 정상적으로 되지 않았습니다.")});else if(F.split("#").length<2)alert("태그 앞에 #를 붙여주세요");else{let t=F.toUpperCase();e.preventDefault(),e.stopPropagation(),h.Z.post(s,{hashtags:t,category:N,season:A},{headers:{"Content-Type":"application/json"}}).then(e=>{l(e.data)}).catch(e=>{alert("해시태그 포함된 포스팅이 없습니다."),console.log(e)})}},[F,l,N,A]),ee="primary-search-account-menu",et=(0,n.jsxs)(f.Z,{anchorEl:I,anchorOrigin:{vertical:"top",horizontal:"right"},id:ee,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:U,onClose:X,children:[(0,n.jsx)(m.Z,{onClick:X,children:"Profile"}),(0,n.jsx)(m.Z,{onClick:X,children:"My account"})]}),ea="primary-search-account-menu-mobile",en=(0,n.jsx)(f.Z,{anchorEl:L,anchorOrigin:{vertical:"top",horizontal:"right"},id:ea,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:H,onClose:V,children:(0,n.jsx)(m.Z,{children:(0,n.jsx)("p",{children:"만드는 중입니다"})})});return(0,n.jsxs)(c.Z,{sx:{flexGrow:1},children:[!t&&r&&(0,n.jsx)(P,{setIsLoggedIn:a,setModalOpen:g}),t&&w&&(0,n.jsx)(D,{setuploadModalOpen:S}),!t&&W&&(0,n.jsx)(R,{setIsLoggedIn:a,setloginModalOpen:E}),(0,n.jsx)(d.Z,{position:"static",style:{backgroundColor:"#FFF",color:"#000"},children:(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(x.Z,{noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}}}),(0,n.jsx)(c.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),(0,n.jsxs)("form",{onSubmit:Y,style:{width:"70%",flex:"auto",marginLeft:"15%"},children:[(0,n.jsx)(u.Z,{type:"submit","aria-label":"search",sx:{display:{xs:"none",md:"inline-block"}},children:(0,n.jsx)(y.Z,{style:{fill:"#9A9A9A"}})}),(0,n.jsx)(b.Z,{id:"search-bar",className:"text",sx:{display:"inline-block",width:"80%"},value:F,onChange:z,label:"#상의 #검정",variant:"outlined",placeholder:"Search...",size:"small",inputRef:B})]}),(0,n.jsx)(c.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),(0,n.jsxs)(c.Z,{sx:{display:{xs:"none",md:"flex"}},children:[(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.Z,{size:"large",edge:"end",sx:{marginRight:"10px"},"aria-label":"account of current user","aria-haspopup":"false",color:"primary",onClick:J,children:(0,n.jsx)(v.Z,{})})}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{width:"100%",marginRight:"5px",fontWeight:"bold",display:"inline-block",whiteSpace:"nowrap"},size:"small",onClick:$,children:"로그아웃"}),(0,n.jsx)(u.Z,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":ee,"aria-haspopup":"true",color:"primary",onClick:Q,children:(0,n.jsx)(k.Z,{})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{width:"40%",marginRight:"5px",fontWeight:"bold",display:"inline-block"},size:"small",onClick:G,children:"로그인"}),(0,n.jsx)(j.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{width:"40%",fontWeight:"bold",display:"inline-block"},onClick:M,size:"small",children:"가입"})]})]}),(0,n.jsx)(c.Z,{sx:{display:{xs:"flex",md:"none"},float:"right"},children:(0,n.jsx)(u.Z,{size:"large","aria-label":"show more","aria-controls":ea,"aria-haspopup":"true",onClick:K,color:"primary",children:(0,n.jsx)(C.Z,{})})})]})}),en,et]})}(0,o.ZP)("div")(e=>{let{theme:t}=e;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,r.Fq)("#F8F8F8",.73),"&:hover":{backgroundColor:(0,r.Fq)("#F8F8F8",.33)},marginRight:t.spacing(2),marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{marginLeft:t.spacing(3),width:"auto"}}}),(0,o.ZP)("div")(e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),(0,o.ZP)(g.ZP)(e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%",[t.breakpoints.up("md")]:{width:"20ch"},height:"40%"}}});var N=a(629),q=a(6242),A=a(4267),O=a(3965),B=a(1733),M=a(7957),G=a(9974),U=a(2023);function H(e){let[t,a]=(0,i.useState)(""),[l,s]=(0,i.useState)(""),o="".concat("http://15.164.224.172:8080","/hashtagsearch"),r="".concat("http://15.164.224.172:8080","/deletpost/").concat(e.id),d=(0,i.useCallback)(()=>{e.isLoggedIn?h.Z.post(r,{}).then(t=>{let a=e.posts.filter(t=>t.id!==e.id);e.setPost(a)}).catch(e=>{console.log(e)}):alert("로그인 해주세요")},[r,e]),c=(0,i.useCallback)(()=>{alert("만드는 중입니다..")},[]);(0,i.useEffect)(()=>{a(e.category),s("23SS")},[e.category]);let p=i.useCallback((t,a)=>{t.preventDefault(),t.stopPropagation(),h.Z.post(o,{hashtags:"#"+a},{headers:{"Content-Type":"application/json"}}).then(t=>{e.setPost(t.data)}).catch(e=>{alert("해시태그 포함된 포스팅이 없습니다."),console.log(e)})},[]);return(0,n.jsxs)(q.Z,{sx:{maxWidth:"15",marginTop:"20px",boxShadow:"none"},children:[(0,n.jsxs)(G.Z,{href:"".concat(e.link),target:"_blank",children:[(0,n.jsx)(O.Z,{component:"img",height:"300",image:"../".concat(e.src),alt:"green iguana"}),(0,n.jsxs)(A.Z,{children:[(0,n.jsx)(x.Z,{children:(0,n.jsxs)("span",{style:{fontWeight:900,fontSize:"130%",marginBottom:"4%"},children:[e.name[0],"_","".concat(e.brand)]})}),(0,n.jsx)(x.Z,{sx:{fontWeight:900,marginBottom:"1%"},variant:"subtitle2",color:"text.secondary",children:"참고할 부분"}),(0,n.jsx)(x.Z,{sx:{marginBottom:"1%"},variant:"body2",color:"text.secondary",children:e.reason})]})]}),(0,n.jsxs)(U.Z,{children:[(0,n.jsxs)("div",{style:{width:"100%",marginBottom:"3%"},children:[(0,n.jsx)(M.Z,{id:"editicon",onClick:c}),(0,n.jsx)(B.Z,{id:"delicon",onClick:d})]}),e.hashtags.map((e,t)=>(0,n.jsxs)("div",{style:{margin:"2px"},children:[(0,n.jsx)("div",{className:"Tag".concat(parseInt(e.PostHashtag.HashtagId)%8," Tag"),style:{display:"inline-block",margin:"2px"},onClick:t=>{p(t,e.name)},children:(0,n.jsxs)("a",{href:"",children:["#",e.name]})})," ","\xa0"]},t))]})]})}var V=a(6886);let X=(0,o.ZP)(N.Z)(e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary}});function $(e){let{setIsLoggedIn:t,isLoggedIn:a,setPost:l,posts:s}=e;return(0,n.jsx)(c.Z,{sx:{flexGrow:1},children:(0,n.jsx)(V.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:s.map((e,i)=>(0,n.jsx)(V.ZP,{item:!0,xs:6,sm:4,md:3,lg:4,children:(0,n.jsx)(X,{children:(0,n.jsxs)("li",{style:{maxWidth:"320px",display:"inline-block"},children:[(0,n.jsx)(H,{isLoggedIn:a,setIsLoggedIn:t,name:e.name,index:i,setPost:l,posts:s,id:e.id,category:e.category,brand:e.brand,src:e.Images[0].src,link:e.link,season:e.season,hashtags:e.Hashtags,reason:e.reason})," "]})})},i))})})}function J(){let[e,t]=i.useState(!1),[a,l]=(0,i.useState)([]),o="".concat("http://15.164.224.172:8080","/loadpost"),r=(0,i.useCallback)(()=>{h.Z.get(o).then(e=>{l(e.data)}).catch(e=>{alert("로딩이 정상적으로 되지 않았습니다."),l([]),console.log(e)})},[l]);(0,i.useEffect)(()=>{r()},[r]);let d="".concat("http://15.164.224.172:8080","/logincheck");return(0,i.useEffect)(()=>{h.Z.get(d).then(e=>{e.data.login&&t(!0)}).catch(e=>{console.log(e)})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Crump REF"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,n.jsxs)("div",{style:{margin:"auto",width:"80%"},children:[(0,n.jsx)("a",{onClick:r,children:(0,n.jsx)("h1",{id:"title",children:"CRUMP REFERENCE"})}),(0,n.jsx)("div",{style:{marginBottom:"40px"},children:(0,n.jsx)(_,{isLoggedIn:e,setIsLoggedIn:t,setPost:l})}),(0,n.jsx)($,{isLoggedIn:e,setIsLoggedIn:t,setPost:l,posts:a})]})]})}}},function(e){e.O(0,[594,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);