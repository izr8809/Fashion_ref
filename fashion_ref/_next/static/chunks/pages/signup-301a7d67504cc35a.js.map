{"version":3,"file":"static/chunks/pages/signup-301a7d67504cc35a.js","mappings":"oFACA,CAAAA,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAC,IAAA,EACA,UACA,WACA,OAAeC,EAAQ,KACvB,EACA,kDCFAC,CAAAA,EAAA,EAAe,GAA+B,CAC5C,GAAM,CAACC,EAAOC,EAAO,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAASC,GAC3BC,EAAgBC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,GAAa,CAC7CJ,EAAOK,EACT,EAAG,EAAE,EACL,MAAO,CAACN,EAAOI,EAASH,EAAO,+KCUjC,IAAMM,EAAQ,CACZC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,MAAO,IACPC,QAAS,mBACTC,OAAQ,iBACRC,UAAW,GACXC,EAAG,CACL,EACe,SAASC,EAAOC,CAA6B,CAAgB,IAA7C,CAAEC,aAAAA,CAAAA,CAA2B,CAA7BD,EAEvB,CAACE,EAAOC,EAAc,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,IAClC,CAACC,EAAUC,EAAiB,CAAGF,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,IACxC,CAACG,EAAUC,EAAiB,CAAGJ,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,IACxC,CAACK,EAAeC,EAAiB,CAAG1B,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAC7C,CAAC2B,EAAeC,EAAiB,CAAG5B,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAC7C,CAAC6B,EAAYC,EAAc,CAAG9B,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACfG,CAAAA,EAAAA,EAAAA,WAAAA,EAC5B,GAAY,CACVuB,EAAiBtB,EAAE2B,MAAM,CAACjC,KAAK,EAC/B8B,EAAiBxB,EAAE2B,MAAM,CAACjC,KAAK,GAAKyB,EACtC,EACA,CAACA,EAAS,EAmBZ,IAAMS,EAAa,IAAM,CACvBf,EAAa,GACf,EAuBMgB,EAAW9B,CAAAA,EAAAA,EAAAA,WAAAA,EACf,GAAY,CACV,GAAIoB,IAAaE,EACf,OAAOG,EAAiB,GACzB,CACDxB,EAAE8B,cAAc,GAIhBC,QAAQC,GAAG,CAAClB,EAAOG,EAAUE,GAC7Bc,EAAAA,CAAAA,CAAAA,IACO,CAnEC,gCAuEJ,CACEnB,MAAOA,EACPoB,KAAMjB,EACNE,SAAUA,CACZ,EACA,CACEgB,QAAS,CACP,eAAgB,kBAElB,CACF,GAODC,IAAI,CAAC,GAAY,CAChBL,QAAQC,GAAG,CAACK,GACZN,QAAQC,GAAG,CAAC,aACZD,QAAQC,GAAG,CAACK,EAAOC,IAAI,EACvBZ,EAAc,GAGhB,GACCa,KAAK,CAAC,GAAW,CAChBC,MAAM,yBACNT,QAAQC,GAAG,CAACS,EACd,EACJ,EACA,CAAC3B,EAAOK,EAAUE,EAAc,SAGlC,EAgHO,GAAAqB,EAAAC,GAAA,EAAAD,EAAAE,QAAA,KA9GH,GAAAF,EAAAC,GAAA,EAACE,EAAAA,CAAKA,CAAAA,CACJC,KAAM,GACNC,QAASnB,EACToB,kBAAgB,oBAChBC,mBAAiB,mCAEjB,GAAAP,EAAAQ,IAAA,EAACC,EAAAA,CAAGA,CAAAA,CACJC,UAAU,OACVC,WAAU,GACVC,aAAa,MACbzB,SAAUA,EACV0B,GAAItD,YAEF,GAAAyC,EAAAC,GAAA,EAACa,EAAAA,CAAUA,CAAAA,CAACJ,UAAU,KAAKK,QAAQ,cAAK,SAGtC,GAAAf,EAAAC,GAAA,EAACe,EAAAA,CAASA,CAAAA,CACRC,MAAM,MACNzB,KAAK,aACL0B,UAAS,GACTC,KAAK,QACLnE,MAAOoB,EACPgD,SAAQ,GACRrB,MAAOsB,CAlHA,GAAiB,CAClC,IAAIC,EAAM,GAEV,GAAKlD,EAEE,CACL,IAAMmD,EACJ,kFAAkFC,IAAI,CACpFpD,GAEKkD,IAATC,CACF,MAPED,EAAM,EAOP,CAED,OAAOA,CACT,GAoG8BlD,GAClBqD,SAAU,GAAO,CACfpD,EAAcf,EAAE2B,MAAM,CAACjC,KAAK,CAC9B,IAEF,GAAAgD,EAAAC,GAAA,EAACe,EAAAA,CAASA,CAAAA,CACRC,MAAM,KACNzB,KAAK,YACL0B,UAAS,GACTlE,MAAOuB,EACP6C,SAAQ,GACRK,SAAU,GAAO,CACfjD,EAAiBlB,EAAE2B,MAAM,CAACjC,KAAK,CACjC,IAEF,GAAAgD,EAAAC,GAAA,EAACe,EAAAA,CAASA,CAAAA,CACRC,MAAM,OACNC,UAAS,GACT1B,KAAK,gBACL2B,KAAK,WACLnE,MAAOyB,EACP2C,SAAQ,GACRK,SAAU,GAAO,CACf/C,EAAiBpB,EAAE2B,MAAM,CAACjC,KAAK,CACjC,IAEF,GAAAgD,EAAAC,GAAA,EAACe,EAAAA,CAASA,CAAAA,CACRC,MAAM,SACNC,UAAS,GACT1B,KAAK,sBACL2B,KAAK,WACLnE,MAAO2B,EACPyC,SAAQ,GACRK,SAAU,GAAO,CACf7C,EAAiBtB,EAAE2B,MAAM,CAACjC,KAAK,CACjC,IAED6B,GAAiB,GAAAmB,EAAAC,GAAA,EAACyB,OAAAA,UAAK,qBACxB,GAAA1B,EAAAC,GAAA,EAAC0B,EAAAA,CAAMA,CAAAA,CACHR,KAAK,SACLD,UAAS,GACTH,QAAQ,YACRF,GAAI,CAAEe,GAAI,EAAGC,GAAI,CAAE,EACnBC,KAAK,iBACN,aA0CZ,AAEH","sources":["webpack://_N_E/?43bc","webpack://_N_E/./hooks/useInput.ts","webpack://_N_E/./pages/signup.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/signup\",\n      function () {\n        return require(\"private-next-pages/signup.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/signup\"])\n      });\n    }\n  ","import { useInput } from '@mui/base';\r\nimport { useState, useCallback } from 'react';\r\n\r\n\r\nexport default (initValue : null | string) => {\r\n  const [value, setter] = useState(initValue);\r\n  const handler : any = useCallback((e : any) => {\r\n    setter(e);\r\n  }, []);\r\n  return [value, handler, setter];\r\n};\r\n","import React, {\r\n  useCallback,\r\n  useRef,\r\n  useState,\r\n  useEffect,\r\n  ReactElement,\r\n} from \"react\";\r\nimport useInput from \"../hooks/useInput\";\r\nimport axios from \"axios\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from '@mui/material/Button';\r\n\r\ntype SignupProps = {\r\n  setModalOpen: any;\r\n};\r\n\r\nconst style = {\r\n  position: \"absolute\" as \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: 400,\r\n  bgcolor: \"background.paper\",\r\n  border: \"2px solid #000\",\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\nexport default function Signup({ setModalOpen }: SignupProps): ReactElement {\r\n  const API = \"http://localhost:3065/signups\";\r\n  const [email, onChangeEmail] = useInput(\"\");\r\n  const [nickname, onChangeNickname] = useInput(\"\");\r\n  const [password, onChangePassword] = useInput(\"\");\r\n  const [passwordCheck, setPasswordCheck] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(false);\r\n  const [isLoggedIn, setisLoggedIn] = useState(false);\r\n  const onChangePasswordCheck = useCallback(\r\n    (e: any) => {\r\n      setPasswordCheck(e.target.value);\r\n      setPasswordError(e.target.value !== password);\r\n    },\r\n    [password]\r\n  );\r\n\r\n  const checkEmail = (email : any) => {\r\n    let res = false;\r\n  \r\n    if (!email) {\r\n      res = false;\r\n    } else {\r\n      const check =\r\n        /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/.test(\r\n          email\r\n        );\r\n      check ? (res = true) : (res = false);\r\n    }\r\n  \r\n    return res;\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  // const modalRef = useRef<HTMLDivElement>(null);\r\n  // useEffect(() => {\r\n  //   // 이벤트 핸들러 함수\r\n  //   const handler = (event: any) => {\r\n  //     // mousedown 이벤트가 발생한 영역이 모달창이 아닐 때, 모달창 제거 처리\r\n  //     if (modalRef.current && !modalRef.current.contains(event.target)) {\r\n  //       setModalOpen(false);\r\n  //     }\r\n  //   };\r\n\r\n  //   // 이벤트 핸들러 등록\r\n  //   document.addEventListener(\"mousedown\", handler);\r\n  //   // document.addEventListener('touchstart', handler); // 모바일 대응\r\n\r\n  //   return () => {\r\n  //     // 이벤트 핸들러 해제\r\n  //     document.removeEventListener(\"mousedown\", handler);\r\n  //     // document.removeEventListener('touchstart', handler); // 모바일 대응\r\n  //   };\r\n  // }, []);\r\n\r\n  const onSubmit = useCallback(\r\n    (e: any) => {\r\n      if (password !== passwordCheck) {\r\n        return setPasswordError(true);\r\n      }\r\n      e.preventDefault();\r\n      // if (!term) {\r\n      //   return setTermError(true);\r\n      // }\r\n      console.log(email, nickname, password);\r\n      axios\r\n        .post(\r\n          API,\r\n          // 클라이언트에서 서버로 request(요청)하며 보내주는 데이터\r\n          // 회원가입창에서 클라이언트가 입력하는 데이터\r\n          {\r\n            email: email,\r\n            name: nickname,\r\n            password: password, // 숫자, 영어 대문자, 소문자, 특수기호, 8-20자  1234567#Aaa\r\n          },\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              // 'Accept': 'application/json',\r\n            },\r\n          }\r\n        )\r\n        // 그러면 서버에서 클라이언트로 response(응답)으로\r\n        // {ok: true} 아니면 {ok: false}가 온다.\r\n        // .then((response) => {\r\n        //   console.log(response); // response.data로 해야?\r\n        // })\r\n        .then((result) => {\r\n          console.log(result);\r\n          console.log(\"singupDB!\");\r\n          console.log(result.data);\r\n          setisLoggedIn(true);\r\n          // window.alert('회원가입이 되었습니다! 로그인 해주세요.');\r\n          // history.replace('/login');\r\n        })\r\n        .catch((error) => {\r\n          alert(\"회원가입이 정상적으로 되지 않았습니다.\");\r\n          console.log(error);\r\n        });\r\n    },\r\n    [email, password, passwordCheck]\r\n  );\r\n\r\n  if (!isLoggedIn) {\r\n    return (\r\n      <Modal\r\n        open={true}\r\n        onClose={closeModal}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box \r\n        component=\"form\"\r\n        noValidate\r\n        autoComplete=\"off\"\r\n        onSubmit={onSubmit}\r\n        sx={style}>\r\n          {/* <form onSubmit={onSubmit}> */}\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            회원가입\r\n          </Typography>\r\n            <TextField\r\n              label=\"이메일\"\r\n              name=\"user-email\"\r\n              fullWidth\r\n              type=\"email\"\r\n              value={email}\r\n              required\r\n              error={checkEmail(email)}\r\n              onChange={(e) => {\r\n                onChangeEmail(e.target.value);\r\n              }}\r\n            />\r\n            <TextField\r\n              label=\"이름\"\r\n              name=\"user-nick\"\r\n              fullWidth\r\n              value={nickname}\r\n              required\r\n              onChange={(e) => {\r\n                onChangeNickname(e.target.value);\r\n              }}\r\n            />\r\n            <TextField\r\n              label=\"비밀번호\"\r\n              fullWidth\r\n              name=\"user-password\"\r\n              type=\"password\"\r\n              value={password}\r\n              required\r\n              onChange={(e) => {\r\n                onChangePassword(e.target.value);\r\n              }}\r\n            />\r\n            <TextField\r\n              label=\"비밀번호체크\"\r\n              fullWidth\r\n              name=\"user-password-check\"\r\n              type=\"password\"\r\n              value={passwordCheck}\r\n              required\r\n              onChange={(e) => {\r\n                setPasswordCheck(e.target.value);\r\n              }}\r\n            />\r\n            {passwordError && <span>비밀번호가 일치하지 않습니다.</span>}\r\n            <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                sx={{ mt: 3, mb: 2 }}\r\n                size=\"large\"\r\n              >\r\n                회원가입\r\n              </Button>\r\n          {/* </form> */}\r\n        </Box>\r\n        {/* <Button onClick={closeModal}>닫기</Button> */}\r\n      </Modal>\r\n      // {/* <div className={\"container\"} ref={modalRef}>\r\n      //       {/* <label htmlFor=\"user-email\">이메일</label>\r\n      //       <br />\r\n      //       <input name=\"user-email\" type=\"email\" value={email} required onChange={ (e) => {onChangeEmail(e.target.value)}} /> */}\r\n      //     </TextField>\r\n      //     <div>\r\n      //       <label htmlFor=\"user-nick\">닉네임</label>\r\n      //       <br />\r\n      //       <input name=\"user-nick\" value={nickname} required onChange={(e) => {onChangeNickname(e.target.value)}} />\r\n      //     </div>\r\n      //     <div>\r\n      //       <label htmlFor=\"user-password\">비밀번호</label>\r\n      //       <br />\r\n      //       <input name=\"user-password\" type=\"password\" value={password} required onChange={(e) => {onChangePassword(e.target.value)}} />\r\n      //     </div>\r\n      //     <div>\r\n      //       <label htmlFor=\"user-password-check\">비밀번호체크</label>\r\n      //       <br />\r\n      //       <input name=\"user-password-check\" type=\"password\" value={passwordCheck} required onChange={(e) => {setPasswordCheck(e.target.value)}} />\r\n\r\n      //       {/* {passwordError && <ErrorMessage>비밀번호가 일치하지 않습니다.</ErrorMessage>} */}\r\n      //     </div>\r\n      //     {/* <div>\r\n      //       <Checkbox name=\"user-term\" checked={term} onChange={onChangeTerm}>제로초 말을 잘 들을 것을 동의합니다.</Checkbox>\r\n      //       {termError && <ErrorMessage>약관에 동의하셔야 합니다.</ErrorMessage>}\r\n      //     </div> */}\r\n      //     <div style={{ marginTop: 10 }}>\r\n      //       <button>가입하기</button>\r\n      //     </div>\r\n      //     <button className={\"close\"} onClick={closeModal}>\r\n      //         X\r\n      //     </button>\r\n      //   </div> */}\r\n      // }\r\n    );\r\n  }\r\n  return <></>;\r\n}\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","value","setter","useState","initValue","handler","useCallback","e","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","Signup","param","setModalOpen","email","onChangeEmail","useInput","nickname","onChangeNickname","password","onChangePassword","passwordCheck","setPasswordCheck","passwordError","setPasswordError","isLoggedIn","setisLoggedIn","target","closeModal","onSubmit","preventDefault","console","log","axios","name","headers","then","result","data","catch","alert","error","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Fragment","Modal","open","onClose","aria-labelledby","aria-describedby","jsxs","Box","component","noValidate","autoComplete","sx","Typography","variant","TextField","label","fullWidth","type","required","checkEmail","res","check","test","onChange","span","Button","mt","mb","size"],"sourceRoot":""}